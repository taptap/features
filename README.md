# TapTap DevContainer Features

## ç”¨é€”

TapTap å›¢é˜Ÿçš„ DevContainer Features é›†åˆï¼Œæä¾›æ ‡å‡†åŒ–çš„å¼€å‘ç¯å¢ƒé…ç½®ã€‚è¿™ä¸ª monorepo åŒ…å«å¤šä¸ªå¯å¤ç”¨çš„ featuresï¼Œç”¨äºåœ¨å¼€å‘å®¹å™¨ä¸­å¿«é€Ÿæ­å»ºä¸€è‡´çš„å¼€å‘ç¯å¢ƒã€‚

## Features åˆ—è¡¨

### 1. ğŸ§ª git-config

é…ç½®ç»„ç»‡çº§ Git è®¾ç½®ï¼ŒåŒ…æ‹¬ï¼š

- å®‰è£…æœ€æ–°ç‰ˆ Gitï¼ˆæ”¯æŒ PPAï¼‰
- é…ç½®æ ‡å‡†åŒ–çš„ç³»ç»Ÿçº§ gitconfig
- è®¾ç½®ç»Ÿä¸€çš„ gitignore è§„åˆ™
- è‡ªåŠ¨å®‰è£… git-lfs

### 2. âŒ›ï¸ dotfiles

è®©ç”¨æˆ·æ–¹ä¾¿ bootstrap è‡ªå·±çš„ dotfiles

### 3. âŒ›ï¸ git-delta

å®‰è£…å’Œé…ç½® delta ä½œä¸º Git çš„ diff å·¥å…·

## ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ src/                               # Features æºä»£ç 
â”œâ”€â”€ test/                              # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ .github/
    â””â”€â”€ workflows/                     # CI/CD å·¥ä½œæµ
```

## ä½¿ç”¨æ–¹æ³•

### åœ¨é¡¹ç›®ä¸­ä½¿ç”¨

åœ¨ä½ çš„é¡¹ç›® `.devcontainer.json` ä¸­æ·»åŠ éœ€è¦çš„ featuresï¼š

```json
{
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",
  "features": {
    "ghcr.io/taptap/features/git-config": {
      "version": "latest",
      "ppa": true
    },
    "ghcr.io/taptap/features/dotfiles": {},
    "ghcr.io/taptap/features/git-delta": {}
  }
}
```

### æœ¬åœ°å¼€å‘ä¸æµ‹è¯•

1. **å®‰è£… devcontainer CLI**ï¼š

   ```bash
   bun add -g @devcontainers/cli
   ```

2. **æµ‹è¯•å•ä¸ª feature**ï¼š

   ```bash
   devcontainer features test --features src/git-config
   ```

3. **æµ‹è¯•æ‰€æœ‰ features**ï¼š

   ```bash
   devcontainer features test --features src
   ```

4. **è¿è¡Œç‰¹å®šæµ‹è¯•åœºæ™¯**ï¼š
   ```bash
   devcontainer features test --features src/git-config --skip-autogenerated
   ```

## å‘å¸ƒ

Features ä¼šè‡ªåŠ¨å‘å¸ƒåˆ° GitHub Container Registryï¼š

```bash
# æ‰‹åŠ¨å‘å¸ƒï¼ˆéœ€è¦é€‚å½“çš„æƒé™ï¼‰
devcontainer features publish src --namespace ghcr.io/taptap/features
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–° Feature

1. åœ¨ `src/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. åˆ›å»ºå¿…éœ€æ–‡ä»¶ï¼š
   - `devcontainer-feature.json` - Feature å…ƒæ•°æ®
   - `install.sh` - å®‰è£…è„šæœ¬ï¼ˆéœ€è¦å¯æ‰§è¡Œæƒé™ï¼‰
3. åœ¨ `test/` ä¸‹åˆ›å»ºå¯¹åº”çš„æµ‹è¯•ç›®å½•
4. ç¼–å†™æµ‹è¯•è„šæœ¬å’Œåœºæ™¯

### æµ‹è¯•è¦æ±‚

- æ¯ä¸ª feature å¿…é¡»æœ‰å¯¹åº”çš„æµ‹è¯•
- æµ‹è¯•åº”è¦†ç›–ä¸»è¦çš„ Linux å‘è¡Œç‰ˆï¼ˆUbuntuã€Debianã€Alpineï¼‰
- ä½¿ç”¨ `dev-container-features-test-lib` è¿›è¡Œæ–­è¨€

### CI/CD

æ‰€æœ‰ PR ä¼šè‡ªåŠ¨è¿è¡Œæµ‹è¯•ï¼Œåˆå¹¶åˆ° main åˆ†æ”¯åä¼šè‡ªåŠ¨å‘å¸ƒåˆ° registryã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ PRï¼è¯·ç¡®ä¿ï¼š

1. æ–° feature æœ‰å®Œæ•´çš„æµ‹è¯•è¦†ç›–
2. æ›´æ–°æœ¬ README çš„ features åˆ—è¡¨
3. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œç»“æ„

## License

MIT
